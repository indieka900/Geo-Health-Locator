{% extends 'base.html' %}

{% block content %}
<form id="diseaseForm" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <br>

    <button type="button" id="getLocationBtn">Get Location</button>
    <input type="submit" value="Add Disease">
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#getLocationBtn').click(function(event) {
            event.preventDefault(); // Prevent default form submission
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        });
        
        function showPosition(position) {
            $('#latitude').val(position.coords.latitude);
            $('#longitude').val(position.coords.longitude);
        }
    
    })
    </script>
{% endblock content %}